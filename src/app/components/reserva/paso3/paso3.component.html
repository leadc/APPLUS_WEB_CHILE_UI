<app-preloader-container #preloaderContainer>
    <div class="container py-3">
        <div class="row">
            <div class="col-12">
                <h2 class="titulo-paso-reserva mb-4">Paso Nro 3.</h2>
                <p>Completa el formulario con tus datos.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-sm-8 col-lg-6">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <div class="mb-3">
                                <input type="text" maxlength="15" [(ngModel)]="this.reserva.patente" class="form-control" aria-describedby="Patente" placeholder="Placa patente" style="width: 40%; min-width: 185px;">
                            </div>
                            <div class="mb-3">
                                <input type="text" maxlength="50" [(ngModel)]="this.reserva.nombre" class="form-control" placeholder="Nombre" aria-describedby="Nombre">
                            </div>
                            <div class="mb-3">
                                <input type="text" maxlength="50" [(ngModel)]="this.reserva.apellido" class="form-control" placeholder="Apellido" aria-describedby="Apellido">
                            </div>
                            <div class="mb-3">
                                <input type="text" maxlength="40" [(ngModel)]="this.reserva.rut" class="form-control" placeholder="RUT" aria-describedby="RUT">
                            </div>
                            <div class="mb-3">
                                <input type="text" maxlength="15" [(ngModel)]="this.reserva.telefono" class="form-control" placeholder="Teléfono Celular (56-9-12345678)" aria-describedby="Teléfono Celular">
                            </div>
                            <div class="mb-3">
                                <input type="email" maxlength="40" [(ngModel)]="this.reserva.email" class="form-control" placeholder="Correo electrónico" aria-describedby="Correo electrónico">
                            </div>
                            <div class="mb-3">
                                <input type="email" maxlength="40" [(ngModel)]="this.controlEmail" class="form-control" placeholder="Confirmación de correo electrónico" aria-describedby="Confirmación de correo electrónico">
                            </div>
                            <div class="mb-3">
                                <app-select-input [(ngModel)]="this.reserva.idComoNosConocio" title="¿Cómo conoces a Applus+PRT?" aria-describedby="¿Cómo conoces a Applus+PRT?">
                                    <option value="-1" hidden selected>¿Cómo conoces a Applus+PRT?</option>
                                    <option [value]="como.id" *ngFor="let como of this.comoNosConocio">{{ como.descripcion }}</option>
                                </app-select-input>
                            </div>
                            <div class="mb-3">
                                <app-select-input [(ngModel)]="this.reserva.idComuna" title="¿En qué comuna vives?" aria-describedby="¿En qué comuna vives?">
                                    <option value="-1" hidden selected>¿En qué comuna vives?</option>
                                    <option [value]="comuna.id" *ngFor="let comuna of this.comunas">{{ comuna.descripcion }}</option>
                                </app-select-input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-4 col-lg-6 mt-3 mt-sm-0">
                <div class="container">
                    <div class="row">
                        <div class="col-12 d-flex flex-column mb-4 pb-4 border-bottom">
                            <span class="titulo-paso-reserva mb-4">DATOS DE TU RESERVA</span>
                            <span>Día: <span class="font-weight-bold">{{ this.getFechaString() }}</span></span>
                            <span>Horario: <span class="font-weight-bold">{{ this.getHoraString() }}</span></span>
                            <span>Centro: <span class="font-weight-bold">{{ this.reserva.descripcionPlanta | titlecase }}</span></span>
                        </div>
                        <hr>
                        <div class="col-12 d-flex flex-column">
                            <span class="titulo-paso-reserva mb-2">IMPORTANTE</span>
                            <p>Recuerda que los <span style="color: #FC6500; text-decoration: underline;">datos de contacto deben ser reales</span> para que puedas recibir la documentación correspondiente a tu Revisión Técnica.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-sm-8 col-lg-6">
                <div class="container">
                    <div class="row" *ngIf="this.verificarCaptcha">
                        <div class="col-12 text-left mt-3 pb-3">
                            <re-captcha (resolved)="this.resolved($event)" siteKey="6Ld3vTkUAAAAACpYkssfCPqlAieFa1qMpZ6t-qYG"></re-captcha>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 text-left mt-3 pb-3">
                            <div class="alert alert-danger" role="alert" *ngIf="this.mensajesError.length">
                                <ul *ngFor="let mensaje of this.mensajesError" class="pl-3 mb-0">
                                    <li>{{ mensaje }}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 text-left mt-3 pb-3">
                            <button (click)="this.confirmar()" class="button-orange">Confirmar reserva</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</app-preloader-container>